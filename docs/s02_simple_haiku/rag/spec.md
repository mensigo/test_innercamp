## rag_search tool

Лог префикс: `[rag_search]`

Инструмент предоставляет ответ на заданный вопрос через вызов локального RAG-сервиса.

При вызове происходят следующие действия:

1. Вызов эндпоинта /health

WIP


## Пример реализации

### build_index

build_rag_chunks - чтение Markdown файлов из директории, чанкирование
init_faiss_index - построение индекса по набору чанков, сохранение индекса (опц. загрузка сохраненного индекса)

### rag_service

Вэб-сервис на Flask. Есть инициализация индекса перед первым запросом.

#### GET /health

- если индекс проинициализирован, то сервис возвращает статус ok, 200
- иначе сервис возвращает статус not_ready, 503

#### POST /search (с параметром question)

Обязательные параметры: question.
Опциональные параметры: top_k.

- если параметра question нет, то сервис возвращает {'error': 'Missing question'}, 400
- если поиск по индексу завершается ошибкой, то сервис возвращает {'error': 'Search failed'}, 500
- если происходит другая ошибка, то сервис возвращает {'error': 'Internal server error'}, 500
- если поиск завершается успехом, то сервис возвращает 200 и:
    ```python
    {
        'answer': answer,                  # ответ по RAG
        'chunk_title_list': chunk_titles,  # заголовки топ чанков
        'chunk_texts': chunk_texts,        # тексты топ чанков
        'question': question,              # значение параметра question
        'top_k': top_k,                    # значение параметра top_k
    }
    ```

